{% extends "base.html" %}
{% block content %}
{% load static %}
{% load app_filters %}
<div class="row align-items-start">
  {% getcountries countries as countries %}
  {% include 'projectsidemenu.html' %} 

  
  <div class="col-md-8 p-0  create-pg main-section col-md-10"> 
    <div class="create_project_sec scroll-line new-cru-well">
      {% comment %} <div class="well-name-list">{{well.name}}</div>
      <button class="hide-show fa fa-long-arrow-right"></button> {% endcomment %}

    {% include "projectheader.html" %}
    
        <div class="col-12">
            {% include "welldetails_menu.html" %} 
        </div>
        <div class="col-12">
            <div class="sample-sub-menu">
              <div class="container">
                 <div class="row menu-button menu-types menu_lists">
                    <div class="col-md-3">
                        <div class="sub-list {% if request.session.submenu == 'muddata' %}active{% endif %}">
                            <a href="{% url 'muddata:muddatarheogramlist' wellphase_id %}" id="mud"> Mud Data </a>
                        </div>
                    </div>
                    <div class="col-md-3 data-drill">
                        <div class="sub-list drill-data {% if request.session.submenu == 'drillbit' %}active{% endif %}">
                            <a href="{% url 'drillbitdata:drillbitlist' wellphase_id %}" id="drillbit"> Drill Bit Data</a>
                        </div>
                    </div>
                    <div class="col-md-3">
                      <div class="sub-list {% if request.session.submenu == 'bhadata' %}active{% endif %}">
                          <a href="{% url 'bhadata:bhadatalist' wellphase_id %}" id="bhadata"> BHA Data</a>
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="sub-list {% if request.session.submenu == 'bhadata' %}active{% endif %}">
                          <a href="{% url 'muddata:rheogramlist_actual' wellphase_id %}" id="bhadata">Rheogram</a>
                      </div>
                  </div>
                 </div>
              </div>
            </div>
        </div>
        <div class="col-12 p-0">
          <div class="card">
            <div class="card-header">
              <h4 class="card-title">Create Rheogram</h4>
            </div>
            <div class="card-body">
              <form class="form form-horizontal" method="POST" id="rheogramform">
                {% csrf_token %}
                <input type="hidden" id="well" class="form-control" name="well" value="{{well_id}}"}>
                <input type="hidden" name="well_phase" id="well_phases">
              
                <div class="row">
                  <div class="col-4">
                    <div class="nav flex-column nav-pills" id="section-tab" role="tablist" aria-orientation="vertical">
                      {% for data in muddata %}
                        <a class="nav-link " id="section{{forloop.counter0 }}-tab" data-toggle="pill" href="#section{{forloop.counter0}}" role="tab" aria-controls="v-pills-home" aria-selected="true">
                          <div class="row">
                            <div class="col-md-6">
                              <p>{{data.timestamp | timestamp_to_time:'date'}}</p>
                              <input type="hidden" name="date" value="{{data.date|date:'Y-m-d'}}">
                              <input type="hidden" name="time" value="{{data.time|time:'h:i'}}">
                              <input type="hidden" name="timestamp" value="{{data.timestamp}}">
                              <input type="hidden" name="muddata_id" value="{{data.id}}">


                            </div>
                          </div>
                        </a>
                      {% endfor %}
                    </div>
                  </div>
                  <div class="col-8">
                    <div class="tab-content" id="section-content">
                      {% for data in muddata %}
                        <div class="tab-pane fade" id="section{{forloop.counter0}}" role="tabpanel" aria-labelledby="{{section.section_name}}-tab">
                          <table id="rheogram-table{{forloop.counter0}}">
                            <thead>
                              <tr>
                                <th>RPM</th>
                                <th>Dial</th>
                              </tr>
                            </thead>
                            <tbody>
                              {% for rheogram in data|getrheogram_actual:data %}
                              <tr class="{{mud.section}}">
                                <td>
                                  <input type="hidden" name="rheogram_id{{forloop.parentloop.counter0}}" value="{{rheogram.id}}">
                                  <input type="text" name="rpm{{forloop.parentloop.counter0}}" class="form-control" value="{{rheogram.rpm }}">
                                </td>
                                <td><input type="text" name="dial{{forloop.parentloop.counter0}}" class="form-control" value="{{rheogram.dial }}"></td> 
                                <td>
                                  <button type="button" name="add" class="addrheogram-row iconaction" data-id="{{forloop.parentloop.counter0}}"><i class="fa fa-plus"></i></button>
                                  <button type="button" name="remove" class="rheogramremove iconaction" data-id="{{forloop.parentloop.counter0}}"><i class="fa fa-trash"></i></button>
                                </td>      
                              </tr>
                              {% endfor %}
                            </tbody>
                          </table>
                        </div>
                      {% endfor %}
                    </div>
                    <a href="{% url 'muddata:rheogramedit_actual' wellphase_id %}"> <span class="action-edit-well"><i class="feather icon-edit"></i></span></a>

                    </div>
                  </div>
                  <div class="col-sm-9 offset-sm-3">
                    <button type="submit" id="submit"class="btn btn-primary mr-1 waves-effect waves-float waves-light detail-button">Submit</button>
                    <a class="btn btn-primary pull-right detail-button" href="{{request.META.HTTP_REFERER}}">Go Back</a>
                  </div>
                  </form>
              </div>
            </div>
           
        </div>
    {% include "footer.html" %}
</div>
</div>

<div class="col-2">
  {% include "userheader.html" %}
  <h4 class="model-caption">Well Phases</h4>
  {% for wellphase in wellphases %}
            <div class="row">
              <div class="col-12">
                <nav class="navbar bg-white phase-sidemenu">
                  <ul class="nav navbar-nav">
                    <li class="nav-item phs-list {% if request.session.wellphasetab == wellphase.id %}active{% endif %}">
                      <a class="nav-link" href="{% url 'muddata:getwellphasemenubyid' wellphase.id %}"> {{wellphase.phase_name}}</a>
                      <ul class="myDIV nav navbar-nav custom_active_list pressure-sidemenu  {% if wellphase_id == wellphase.id %}show{% endif %}">
                        {% getsectionbywellphase_id wellphase.id as sections %}
                        {% for section in sections %}
      
                        <li data-id="{{section.section_name}}" wellphase_id="{{wellphase.id}}" class="wellphase_sidemenu remove-line">{{section.section_name | depthunit:request.session.unit}}</li>
                        {% endfor %}
                    </ul>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          {% endfor %}
    </div>
</div>



<link rel="stylesheet" type="text/css" href="{% static 'assets/css/navigation.css' %}">


{% endblock %}
{% block scripts %}
{{block.super}}
<script>
  var well_id=$('#well').val()
</script>
<script src="{% static 'js/optimization.js' %}"></script>

<script src="{% static 'js/menuactive.js' %}"></script>
{%endblock%}
