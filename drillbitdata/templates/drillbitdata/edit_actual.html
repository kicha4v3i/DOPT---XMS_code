{% extends "base.html" %}
{% block content %}
{% load static %}
{% load app_filters %}
<section>
    <div class="row align-items-start">
      {% getcountries countries as countries %}
      {% include 'projectsidemenu.html' %} 
        <!--col-2 end-->
        <!--col-8 start-->
        <div class="col-md-8 p-0  create-pg main-section col-md-10">
            <div class="create_project_sec scroll-line new-cru-well">
            {% comment %} <div class="well-name-list">{{well.name}}</div>
            <button class="hide-show fa fa-long-arrow-right"></button> {% endcomment %}
            {% include "projectheader.html" %}
            <div class="col-12">
                {% include "welldetails_menu.html" %} 
            </div>
            <div class="col-12">
                <div class="sample-sub-menu">
                <div class="container">
                    <div class="row menu-button menu-types">
                    <div class="col-md-3">
                        <div class="sub-list {% if request.session.submenu == 'muddata' %}active{% endif %}">
                            <a href="{% url 'muddata:muddatarheogramlist' wellphase_id %}" id="mud"> Mud Data </a>
                        </div>
                    </div>
                    <div class="col-md-3 data-drill">
                      <div class="sub-list drill-data2 {% if request.session.submenu == 'bhadata' %}active{% endif %}">
                          <a href="{% url 'bhadata:bhadatalist' wellphase_id %}" id="bhadata"> BHA Data</a>
                      </div>
                    </div>
                    <div class="col-md-3 data-drill">
                        <div class="sub-list drill-data {% if request.session.submenu == 'drillbit' %}active{% endif %}">
                            <a href="{% url 'drillbitdata:drillbitlist' wellphase_id %}" id="drillbit"> Drill Bit Data</a>
                        </div>
                    </div>
                    
                    </div>
                </div>
                </div>
            </div>
            <div class="col-12">
                <form class="form form-horizontal" method="POST" id="bhadataform">
                {% csrf_token %}
                <input type="hidden" name="type" id="type" value="edit">
                <input type="hidden" id="well" class="form-control" name="well" value={{well_id}}>
                <input type="hidden" id="well_type" class="form-control" name="well_type" value={{request.session.welltype}}>
                <input type="hidden" id="project_unit" class="form-control" name="unit" value={{unit}}>
                <div class="bhd-side-marg">
                <div class="container">
                    <div class="row">
                    <!-- <div class="col-2">
                    <h6 class="tit-head-mud"> Date</h6>
                    </div>
                    <div class="col-2">
                        <h6 class="tit-head-mud">Time</h6>
                    </div> -->
                    <div class="col-2">
                        <h6 class="tit-head-mud">Serial No</h6>
                    </div>
                    <div class="col-2">
                        <h6 class="tit-head-mud">Bit Type</h6>
                    </div>
                    <div class="col-2">
                        <h6 class="tit-head-mud">BHA</h6>
                    </div>
                    <div class="col-2">
                    </div>
                    </div>
                    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                    {% for drillbit in drillbits %}
                    <div class="panel panel-default">
                        <input type="hidden" name="drill_id" class="drill_id" value="{{drillbit.id}}">
                        <div class="panel-heading new-expand-row" role="tab" id="headingOne">
                        <div class="row">
                            <!-- <div class="col-2">
                            <input type="text" class="form-control start_date" name="date" id="startdate" value="{{drillbit |getdrilldate:'date'}}">
                            </div>
                            <div class="col-2">
                            <input type="text" class="form-control start_time" name="time" id="start_time" value="{{drillbit | getdrilltime:'time'}}">
                            </div> -->
                            <div class="col-2">
                            <input type="text" class="form-control serial_no" name="serial_no" id="serial_no" value="{{drillbit.serial_no}}"><span class="serial_no_error"></span>
                            </div>
                            <div class="col-2">
                            <select class="form-control bit_type" data-id="actual_bit_type" id="bit_type" name="bit_type">
                                <option value="">-- Bit Type --</option>
                                {% for obj in bit_types %}
                                <option  value="{{obj.id}}" {% if obj.id == drillbit.bit_type_id %} selected {% endif %}>{{obj.bittype_names}}</option>
                                {% endfor %}
                            </select>
                            <span class="bit_type_error"></span>
                            </div>
                            <div class="col-2">
                            <select class="form-control bhaname" id="bhaname" data-id="actual_bhaname" name="bhaname">
                                <option value="">-- BHA --</option>
                                {% for bha in bhadata %}
                                <option value="{{bha.id}}" {% if bha.id == drillbit.bha_id %} selected {% endif %}>{{bha.bhaname}}</option>
                                {% endfor %}
                            </select>
                            <span class="bhaname_error"></span>
                            </div>
                            <div class="col-2 expand-mid-btn">
                            <a role="button" data-toggle="collapse" data-parent="#accordion" class="expand-btn clr-expand" href="#collapseOne{{forloop.counter0}}" aria-expanded="true" aria-controls="collapseOne">
                                <i class="fa fa-plus-circle plus-icons-expand" aria-hidden="true"></i>Expand
                            </a>  
                            <a role="button" class="remove_drillbit">
                                <i class="fa fa-minus-circle mins-icons-expand" aria-hidden="true"></i>
                            </a>  
                            </div>
                        </div>
                        
                        </div>
                        <div id="collapseOne{{forloop.counter0}}" class="panel-collapse collapse in outer-border-line" role="tabpanel" aria-labelledby="headingOne">
                        <div class="panel-body">
                            <div class="row">
                            <div class="col-4">
                                <div class="form-group">
                                    <label class="project-edit-name" for="well_phases">Manufacturer</label>
                                    <input type="text" id="manufacture" class="form-control drill-input-form manufacture" name="manufacture" value="{{drillbit.manufacture}}">
                                    <span class="manufacture_error"></span>
                                  </div>
                                <div class="form-group">
                                <label class="project-edit-name" for="well_phases">IDAC Code</label>
                                <input type="text" id="idac_code" class="form-control drill-input-form idac_code" name="idac_code" value="{{drillbit.idac_code}}">
                                <span class="idac_code_error"></span>
                            </div>
                            </div>
                            <div class="col-6">
                                <div class="form-group">
                                <label class="project-edit-name" for="well_phases">No of Nozzles</label>
                                <input type="text" id="no_of_nozzle" class="form-control no_of_nozzle drill-input-form-noz" dataid="{{forloop.counter0}}" name="no_of_nozzle" value="{{drillbit.no_of_nozzle}}">
                                <span class="no_of_nozzle_error"></span>
                                </div>
                                <div class="form-group">
                                  <div class="outline-col-actual">
                                  <label class="project-edit-name mar-left-head" for="well_phases">Nozzles size {% display_nozzle_size_unit request.session.unit%}</label>
                                  <div class="inside-space-actual">
                                  <table id="nozzlestable_actual{{forloop.counter0}}">
                                    {% for nozzle in drillbit.id|getnozzle:'date' %}
                                        <tr><td><input type="text" name="nozzle_size{{forloop.parentloop.counter0}}" class="form-control nozzle_size noz-mar-bot" dataid='{{forloop.parentloop.counter0}}' value="{{nozzle.nozzle_size}}"></td></tr>
                                    {%endfor%}
                                  </table>
                                  </div>
                                  </div>
                                </div>
                                <div class="form-group row ">
                                <div class="col-sm-4 col-form-label">
                                    <label class="project-edit-name" for="well_phases">TFA ({%display_tfa_unit request.session.unit%})</label>
                                </div>
                                <div class="col-sm-8" id="total">
                                    <input type="number" step="any" id="tfa{{forloop.counter0}}" oninput="validate(this)" class="form-control tfa" name="tfa" value="{{drillbit.tfa}}" readonly>
                                    <span class="tfa_error"></span>
                                </div>
                                </div>
    
                            </div>
                            </div>
                        
                        </div>
                        </div>
                    </div>
                    {% endfor %}
                    </div>
                    <div class="row">
                    <div class="col-2"></div>
                    <div class="col-2"></div>
                    <div class="col-2"></div>
                    <div class="col-2"></div>
                    <div class="col-2"> </div>
                    <div class="col-2 expand-mid-btn">
                        <a role="button" id="add_drillbit" class="clr-expand">
                        <i class="fa fa-plus-circle add-icons-expand" aria-hidden="true"></i>Add
                        </a>  
                    </div>
                    </div>
                </div>
                </div>
                <div class="row">
                <div class="col-9">
                <button type="submit" class="btn btn-primary mr-1 waves-effect waves-float waves-light detail-button submit-exp">Submit</button>
                </div>
                <div class="col-3">
                <a class="btn btn-primary pull-right detail-button" href="{{request.META.HTTP_REFERER}}">Go Back</a>
                </div>
                </div>
                </form>
            </div>
            {% include "footer.html" %}
            </div>
        </div>
      <!--col-8 end-->

        <!--col-2 start-->
    <div class="col-2">
        {% include "userheader.html" %}
        <h4 class="model-caption">Well Phases</h4>
        {% for wellphase in wellphases %}
        <div class="row">
          <div class="col-12">
            <nav class="navbar bg-white phase-sidemenu">
              <ul class="nav navbar-nav">
                <li class="nav-item phs-list {% if request.session.wellphasetab == wellphase.id %}active{% endif %}">
                  <a class="nav-link" href="{% url 'muddata:getwellphasemenubyid' wellphase.id %}"> {{wellphase.phase_name}}</a>
                  <!-- <ul class="myDIV nav navbar-nav custom_active_list pressure-sidemenu  {% if wellphase_id == wellphase.id %}show{% endif %}">
                    {% getsectionbywellphase_id wellphase.id as sections %}
                    {% for section in sections %}
                    <li data-id="{{section.section_name}}" wellphase_id="{{wellphase.id}}" class="wellphase_sidemenu remove-line">{{section.section_name | depthunit:request.session.unit}}</li>
                    {% endfor %}
                </ul> -->
                </li>
              </ul>
            </nav>
          </div>
        </div>
        {% endfor %}
        <div class="col-md-12 warning"></div>
      </div>
    </div>
</section>
<script src="{% static 'js/menuactive.js' %}"></script>
<script src="{% static 'js/drillbit.js' %}"></script>
<script src="{% static 'js/allvalidation.js' %}"></script>
{% endblock %}