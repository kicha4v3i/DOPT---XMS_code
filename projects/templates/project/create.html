{% extends "base.html" %}
{% block content %}
{% load static %}
{% load widget_tweaks %}

<link rel="stylesheet" type="text/css" href="{% static 'assets/css/project/create_project.css' %}">
<section id="data-list-view" class="data-list-view-header">
  <div class="container-fluid">
        <div class="row align-items-start">
          <div class="col-md-12 create-pg"> 
            <div class="create_project_sec scroll-line">
              
              {% include "header.html" %}
      
            
            <div class="card">
              <div class="row">
                <div class="col-md-9">
                  <div class="card-header m-0 pl-0">
                    <div class="col-12">
                    <div class="row"> 
                      <div class="col-6 pl-0">            
                    <h4 class="card-title project-title"><a class="bck-button" href="{{request.META.HTTP_REFERER}}"><img class="img-size"  src="../../../static/images/left.png"></a>Create a New Project </h4>
                    </div>
                    <div class="col-6 ">
                     
                    </div>
                    </div>
                    </div>
                  </div>
                  <div class="card-body">
                    <form class="form form-horizontal button-create" method="POST" id="projectform">
                      {% csrf_token %}
                      <div class="row common-row-space">
                        <div class="col-6">
                          <div class="form-group row">                        
                              <label class="project-edit-name" for="project-name">Project Name</label>  
                              <input type="text" name="project_name" id="project_name" class="form-control ml-0">
                              <span class="project_name_error"></span>
                          </div>
                        </div>
                        <!-- <div class="col-6">
                          <div class="form-group row">                          
                            <label class="project-edit-name" for="email-id">Well Manager</label>
                              <select name="user" class="form-control">
                                <option value="">------</option>
                                {% for user in wellmanagers %}
                                  <option value="{{user.id}}">{{user.email}}</option>
                                {% endfor %}
    
                              </select>
                          
                            </div>
                          </div> -->
                          <div class="col-6">
                            <div class="form-group row pl-1">
                              
                                <label class="project-edit-name" for="email-id">Country</label>
                                <select name="country" class="form-control ml-0" id="project_country">
                                  <option value="">------</option>
                                  {% for country in countries %}
                                    <option value="{{country.id}}">{{country.name}}</option>
                                  {% endfor %}
    
                                </select>
                                <span class="country_error"></span>
                            </div>
                          </div>   
                          <div class="col-6">
                            <!-- <label class="project-edit-name" for="email-id">{{projectform.unit.label}}</label> -->
                            <div class="form-group row default_units">   
                              <!-- {% render_field projectform.unit class="form-control" %} -->
                           
                               <p class="project-edit-name def-col" >Default Units</p><br>
                                  <input type="radio" id="api_Unit" class="unit" name="unit" value="API">
                                  <label class="text-center ml-0" for="api_Unit">API</label>
                                  <input type="radio" id="si_Unit" class="unit" name="unit" value="SI">
                                  <label class="text-center" for="si_Unit">SI</label>
                                  <input type="radio" id="mixed_Unit" class="unit" name="unit" value="MIXED">
                                  <label class="text-center" for="mixed_Unit">Mixed API</label>
                                  <span class="unit_error"></span>
                          </div>
                            
                          </div>
                        <div class="col-12 block-col">
                          <div class="row ">
                            <div class="col-6">
                             <div class="pl-2"> <label class="project-edit-name" for="project-name">Block Name</label></div>
                              <div class="row block-row">
                                <div class="col-3">
                                  <div class="plus-btn pl-2">
                                    <button type="button" class="add_block" data-id="0"><i class="fa-solid fa-plus" style="color:#ffffff;" title="Add Block" ></i></button>
                                    <button type="button"  class="remove_block" data-id="0"><i class="fa-solid fa-minus" style="color:#ffffff;"  title="Remove Block" ></i></button>
                                  </div>
                                </div>
                                <div class="col-4">
                                  <input type="text" name="block" class="form-control block "><span class="block_error"></span>
                                </div>
                                <div class="col-3 btn-col">
                                  <div class="plus-btn"><button type="button"  class="add_field" data-id="0"><i class="fa-solid fa-plus" style="color:#ffffff;" title="Add Field"></i></button></div>
                                </div>
                              </div>
                    
                            </div>
                            <div class="col-6">
                              <div class="">
                              <label class="project-edit-name ml-1" for="project-name">Field Name</label>
                              </div>
                              <table id="field_table0" class="field_box m-0">
                                <tbody>
                                
                                </tbody>
    
                              </table>
                            </div>
    
                          </div>
                          
                        </div>
                        
                        <!-- <div class="col-6">
                          <div class="form-group row">
                              <label class="project-edit-name" for="field">{{projectform.field.label}}</label>
                              {% render_field projectform.field class="form-control" %}
                          </div>
                        </div>   -->
                          <div class="col-12 mt-3">
                          <div class="text-center">
                             <button type="submit"  class="btn btn-primary mr-1 waves-effect waves-float waves-light detail-button project_submit">Submit</button> 
                            <!-- <button type="reset" class="btn btn-outline-secondary waves-effect detail-button-reset">Reset</button> -->
                            <!-- <a class="btn btn-primary pull-right detail-button" href="{{request.META.HTTP_REFERER}}">Go Back</a> -->
                        </div>
                        </div>
                        
                      </div>
                    </form>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="p-0">
                    {% include "userheader.html" %}
                    <div>
                      <div id="api_units" class="unit_det" style="display: none;">
                        <table >
                          <tr><th>Dimension</th><th>API Units</th></tr>
                          <tr><td>Length</td><td>ft</td></tr>
                          <tr><td>Diameter</td><td>in</td></tr>
                          <tr><td>Coordinate Length</td><td>m</td></tr>
                          <tr><td>Depth</td><td>ft</td></tr>
                          <tr><td>Pressure</td><td>psi</td></tr>
                          <tr><td>Flowrate</td><td>GPM</td></tr>
                          <tr><td>Dog Leg Severity</td><td>°/100 ft</td></tr>
                          <tr><td>Density</td><td>ppg</td></tr>
                          <tr><td>Gel Strength</td><td>lbf/100ft2</td></tr>
                          <tr><td>Inclination</td><td>°</td></tr>
                          <tr><td>Azimuth</td><td>°</td></tr>
                          <tr><td>Plastic Viscosity</td><td>cP</td></tr>
                          <tr><td>Yield Point</td><td>lbf/100ft2</td></tr>
                          <tr><td>Low Shear Rate </td><td>lbf/100ft2</td></tr>
                        </table>
                      </div>
                      <div id="si_units" class="unit_det" style="display: none;">
                        <table >
                          <tr><th>Dimension</th><th>SI Units</th></tr>
                          <tr><td>Length</td><td>m</td></tr>
                          <tr><td>Diameter</td><td>mm</td></tr>
                          <tr><td>Coordinate Length</td><td>m</td></tr>
                          <tr><td>Depth</td><td>m</td></tr>
                          <tr><td>Pressure</td><td>pa</td></tr>
                          <tr><td>Flowrate</td><td>LPM</td></tr>
                          <tr><td>Dog Leg Severity</td><td>°/30 m</td></tr>
                          <tr><td>Density</td><td>g/cc</td></tr>
                          <tr><td>Gel Strength</td><td>-</td></tr>
                          <tr><td>Inclination</td><td>°</td></tr>
                          <tr><td>Azimuth</td><td>°</td></tr>
                          <tr><td>Plastic Viscosity</td><td>cP</td></tr>
                          <tr><td>Yield Point</td><td>lbf/100ft2</td></tr>
                          <tr><td>Low Shear Rate </td><td>lbf/100ft2</td></tr>
                        </table>
                      </div>
                      <div  id="mixed_units" class="unit_det" style="display: none;">
                        <table >
                          <tr><th>Dimension</th><th>Mixed Units</th></tr>
                          <tr><td>Length</td><td>ft</td></tr>
                          <tr><td>Diameter</td><td>mm</td></tr>
                          <tr><td>Coordinate Length</td><td>m</td></tr>
                          <tr><td>Depth</td><td>ft</td></tr>
                          <tr><td>Pressure</td><td>psi</td></tr>
                          <tr><td>Flowrate</td><td>GPM</td></tr>
                          <tr><td>Dog Leg Severity</td><td>°/30 m</td></tr>
                          <tr><td>Density</td><td>g/cc</td></tr>
                          <tr><td>Gel Strength</td><td>lbf/100ft2</td></tr>
                          <tr><td>Inclination</td><td>°</td></tr>
                          <tr><td>Azimuth</td><td>°</td></tr>
                          <tr><td>Plastic Viscosity</td><td>cP</td></tr>
                          <tr><td>Yield Point</td><td>lbf/100ft2</td></tr>
                          <tr><td>Low Shear Rate </td><td>lbf/100ft2</td></tr>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        
          {% include "footer.html" %}
        </div>              
       
        </div>
          
        </div>
      </div>
    </section>


    {% endblock %}

    {% block scripts %}
    {{block.super}}
    <script src="{% static 'js/allvalidation.js' %}"></script>
    <script>
      
      
      $(function(){
        $('input[type=radio]').click(function(){  
            var value=$(this).val();
            if(value=="API"){
              $("#si_units").hide();
              $("#api_units").show();
              $("#mixed_units").hide();
            }else if(value=="SI"){
              $("#si_units").show();
              $("#api_units").hide();
              $("#mixed_units").hide();
            }
            else{
              $("#mixed_units").show();
              $("#api_units").hide();
            $("#si_units").hide();
            }
          })
  
          $(document).on('click','.add_block',function(){
            var data_id=parseInt($(this).attr('data-id'))+1
            var html=''
            html +='<div class="row">'
              html +='<div class="col-6">'
                html +='<div class="row block-row" data-id="'+data_id+'">'
                  html +='<div class="col-3"><div class="plus-btn pl-2"><button type="button" class="add_block" data-id='+data_id+'><i class="fa-solid fa-plus" style="color:#ffffff;" title="Add Block"></i></button><button type="button"  data-id='+data_id+' class="remove_block"><i class="fa-solid fa-minus" style="color:#ffffff;" title="Remove Block"></i></button></div></div>'
                  html +='<div class="col-4"><input type="text" name="block" class="form-control block"><span class="block_error"></span></div>'
                  html +='<div class="col-3 btn-col"><div class="plus-btn"><button type="button" data-id='+data_id+' class="add_field"><i class="fa-solid fa-plus" style="color:#ffffff;" title="Add Field"></i></button></div></div>'
                html +='</div>'  
              html +='</div>' 
              html +='<div class="col-6">'
                html +='<table class="field_box m-0" id="field_table'+data_id+'">'
                  html +='<tbody>'
                  html +='</tbody>'
                html +='</table>'
              html +='</div>'
            html +='</div>'
   
            $('.block-col').append(html)
  
       
          })
          $(document).on('click','.remove_block',function(){
            $(this).closest('tr').remove()                             
          })
          $(document).on('click','.add_field',function(){
            var trindex=$(this).attr('data-id')
  
            var html=''
            html +='<tr>'  
            html +='<td><input type="text" name="field'+trindex+'" class="form-control field form-mar"><span class="field_error"></span></td>'
            html +='<td><div class="plus-btn plus-min-field"><button type="button" class="addfield" data-id='+trindex+'><i class="fa-solid fa-plus" style="color:#ffffff;" title="Add Field"></i></button><button type="button"  data-id='+trindex+' class="removefield"><i class="fa-solid fa-minus" style="color:#ffffff;" title="Remove Field"></i></button></div></td>'
         
            html +='</tr>'  
   
            $('#field_table'+trindex+' tbody').append(html)                    
  
          })
          $(document).on('click','.addfield',function(){
            var dataid=$(this).attr('data-id')
            var html=''
            html +='<tr>'  
            html +='<td><input type="text" name="field'+dataid+'" class="form-control field form-mar"><span class="field_error"></span></td>'
            html +='<td><div class="plus-btn plus-min-field"><button type="button" class="addfield" data-id='+dataid+'><i class="fa-solid fa-plus" style="color:#ffffff;" title="Add Field"></i></button><button type="button"  data-id='+dataid+' class="removefield"><i class="fa-solid fa-minus" style="color:#ffffff;" title="Remove Field"></i></button></div></td>'
         
            html +='</tr>'  
   
            $('#field_table'+dataid+' tbody').append(html)
  
                                  
  
          })
  
      })
      $(document).on('click','.removefield',function(){
             $(this).closest('tr').remove()                             
          })
      $(document).on('click','.remove_block',function(){
          var trindex=$(this).attr('data-id');
          $('div[data-id="'+trindex+'"]').remove();
          $('#field_table'+trindex+'').remove(); 
        });
      /*  function confirm(ev)  {  
          var value= href="{% url 'wells:create' %}";    
          Swal.fire({
            title: 'Create Well',
            showCancelButton: false,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes',
            /*attributes: {
              href : "{% url 'wells:create' %}"
            }*/
         /* }).then((result ) => {
            if (result.value) {
              $("#projectform").submit();
              window.location.href=value
            }
          })
        }*/
        function confirmation(ev)  {
        Swal.fire({
        title: 'Do you want to save the changes?',
        showDenyButton: true,
        showCancelButton: true,
        confirmButtonText: `Save`,
        denyButtonText: `Don't save`,
      }).then((result) => {
        /* Read more about isConfirmed, isDenied below */
        if (result.isConfirmed) {
          Swal.fire('Saved!', '', 'success')
        } else if (result.isDenied) {
          Swal.fire('Changes are not saved', '', 'info')
        }
  })
  }
      </script>

    {%endblock%}


    
    


